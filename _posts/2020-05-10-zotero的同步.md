---
 layout:     post
title:      zotero的同步
subtitle:   使用onedrive同步和使用zotfile处理文件
date:       2020-05-10
author:     周自横
header-img: img/post-200510.jpg
catalog: true
tags:
    - 工具
---

 ## zotero数据不同电脑之间同步

### OneDrive数据同步

在软件的`编辑->首选项`中，登录账户并把在`同步`下面的`文件同步`关闭。

![image-20200510221006979](https://raw.githubusercontent.com/HBaaa/saveImage/master/image-20200510221006979.png)

然后选择`高级`中的`文件与文件夹`，讲数据存储位置选择为本地的一个位置，然后软件会提示你退出，软件将会在该问价夹下生成文件与文件夹

![image-20200510221130336](https://raw.githubusercontent.com/HBaaa/saveImage/master/image-20200510221130336.png)

打开本地的Onedrive目录，必须是本地的，网络位置不行，我使用了`Raidrive`在本地生成新的盘符也是不行的，需要使用Onedrive的客户端，映射到本地的文件目录里(这里不用客户端使用软连接映射到Raidrive是不是应该也可以？？？)。

软件存储文献的主要是通过创建一个`storage`文件夹，在其中包含了正常的应用信息。对此使用软连接，在该数据存储位置创建一个Onedrive文件夹的软连接。也就是：在数据存储位置的文件夹，实际上是Onedrive中文件夹的快捷方式一样。创建软连接的方式是（必须使用管理员）：

~~~cmd
mklink /j "本地的数据存储位置\storage" "OneDrive本地位置的文件夹"
~~~

在另外一台电脑上也同样设置，映射到本地的网盘文件夹必须是之前设置的文件夹才能同步。

同步数据不需要把所有程序的数据都保存在网盘上，可能会造成数据库的紊乱。我自己是真实试验过的。只需要同步storage文件夹就可以了。

### 使用zotfile处理文件

zotfile有一个很实用的功能，就是把文献从`zotero`的文件夹中整理出来。（另外一个实用的功能应该是将论文发送移动端处理并合并，但是具体没有使用）。这是有原因的，在`storage`文件夹下是这样的一个情况：

![image-20200511000630805](https://raw.githubusercontent.com/HBaaa/saveImage/master/image-20200511000630805.png)

每一个单独的文件夹表示一个条目，在文件夹里保存了该条目的数据信息和文献本身的PDF文件。这样有一个问题就是如果你不用该软件的时候，找个论文的PDF文件都不知道是哪一个。所以使用zotfile处理这个问题，它能够将论文从每一个文件夹中取出放在你指定的地方按照命名规范命名。但是存在一个问题，在不同电脑同步的时候，它处理后的文件路径是一个绝对路径，也就是你在不同电脑上存储PDF的路径不同会造成知道具体路径，但是由于此路径下没有文件的原因报错。所以同样使用软链接解决这个问题。思路是，多台电脑间的路径相同，但是不是文件夹，而是创建软链接。

![image-20200511002504812](https://raw.githubusercontent.com/HBaaa/saveImage/master/image-20200511002504812.png)

例如都使用”G:\papers”，就在OneDrive中创建一个文件夹，在每台电脑上都创建此文件夹的软链接”G:\papers”，然后在zotfile插件设置中，将源文件地址指向本地数据“E:\zotero\storage”或者是OneDrive本地的文件夹都可以，将文件的位置指向不同电脑之间相同的文件位置”G:\papers”，这样每次使用zotfile的时候将文件放入”G:\papers”相当于将其放入网盘，另外一台电脑根据网盘更新本地的storage文件夹知道文件转向了”G:\papers”，同时”G:\papers”也因为是网盘同步的原因更新进去了文件。

每次对程序有操作的时候，都点一下右上角的同步按钮，方便将变化传给文件夹，然后文件夹更新的文件，其他电脑文件变化自动同步会同步程序内容变化。

